# ══════════════════════════════════════════════════════════════════════════════
# Flask App Stack — environment variable reference
# Copy this file, fill in your values, and load it in Portainer under
# "Environment variables" when creating or editing a stack.
# ══════════════════════════════════════════════════════════════════════════════

# ── Required ──────────────────────────────────────────────────────────────────

# Full GitHub clone URL of the Flask app repository
# Public:  https://github.com/your-user/your-repo.git
# Private: https://github.com/your-user/your-repo.git  (set REPO_ACCESS=private)
# SSH:     git@github.com:your-user/your-repo.git       (set REPO_AUTH_TYPE=ssh)
GITHUB_REPO=https://github.com/your-user/your-repo.git

# ── App ───────────────────────────────────────────────────────────────────────

# Branch to clone and track for auto-updates
GITHUB_BRANCH=main

# gunicorn module:variable — filename without .py : Flask object name
# Open your repo's main .py file and look for the line that says = Flask(
# Examples:
#   app.py      → app = Flask(...)      → APP_MODULE=app:app
#   wsgi.py     → app = Flask(...)      → APP_MODULE=wsgi:app
#   wgapp.py    → wgapp = Flask(...)    → APP_MODULE=wgapp:wgapp
APP_MODULE=app:app

# Port Gunicorn listens on (also mapped to the host)
APP_PORT=5000

# Gunicorn worker processes — recommended: (2 x CPU cores) + 1
GUNICORN_WORKERS=2

# Threads per worker — increase for I/O-heavy apps
GUNICORN_THREADS=2

# ── Storage ───────────────────────────────────────────────────────────────────

# Container path for writable runtime data (uploads, databases, logs, etc.)
DYNAMIC_STORAGE=/data/dynamic

# Container path for static assets
STATIC_STORAGE=/data/static

# ── Auto-update ───────────────────────────────────────────────────────────────

# Seconds between git fetch checks — set to a large number to effectively disable
UPDATE_INTERVAL=60

# ── Auth (only needed for private repos) ─────────────────────────────────────

# Set to "private" to enable authentication
REPO_ACCESS=public

# Authentication method: "token" or "ssh"
REPO_AUTH_TYPE=token

# GitHub personal access token — required when REPO_AUTH_TYPE=token
# Create at: GitHub → Settings → Developer settings → Personal access tokens
# Minimum permission required: Contents (read)
GITHUB_TOKEN=

# Path to SSH private key inside the container — required when REPO_AUTH_TYPE=ssh
# Mount your key as a volume: /host/path/to/key:/run/secrets/ssh_key:ro
SSH_KEY_PATH=/run/secrets/ssh_key
